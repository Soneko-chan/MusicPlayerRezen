<Page x:Class="UI.AddToPlaylistPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:helpers="clr-namespace:UI.Helpers"
      Title="AddToPlaylistPage">
    <Page.Resources>
        <helpers:DurationConverter x:Key="DurationConverter"/>
    </Page.Resources>
    <Grid Background="{DynamicResource BackgroundColor}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        
        <Border Grid.Row="0" Background="{DynamicResource SecondaryColorBrush}"
                Margin="20,15" CornerRadius="8" Padding="20">
            <StackPanel>
                <TextBlock Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ñ€ÐµÐº Ð² Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚"
                           FontSize="18" FontWeight="SemiBold"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource TextColorBrush}"/>
                <TextBlock x:Name="PlaylistNameText"
                           Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚Ð°"
                           FontSize="14"
                           HorizontalAlignment="Center"
                           Foreground="{DynamicResource LightTextColor}"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        
        <Border Grid.Row="1" Background="{DynamicResource ControlBackgroundColor}"
                Margin="20,10" Padding="15" CornerRadius="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0" Name="SearchBox"
                         Style="{StaticResource StandardTextBoxStyle}"
                         Text="ÐŸÐ¾Ð¸ÑÐº Ñ‚Ñ€ÐµÐºÐ¾Ð²..."
                         Padding="15,8" Margin="0,0,10,0"
                         GotFocus="SearchBox_GotFocus"
                         LostFocus="SearchBox_LostFocus"/>

                <Button Grid.Column="1" Content="ðŸ”"
                        Name="SearchButton"
                        Style="{DynamicResource StandardButtonStyle}"
                        Margin="0,0,10,0" Padding="12,8"
                        Click="SearchButton_Click"/>

                <Button Grid.Column="2" Content="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ"
                        Name="AddSelectedButton"
                        Style="{DynamicResource StandardButtonStyle}"
                        Padding="20,8" Click="AddSelectedButton_Click"/>
            </Grid>
        </Border>

        
        <ScrollViewer Grid.Row="2" >
            <ListBox Name="TracksList" SelectionMode="Multiple" Background="{DynamicResource BackgroundColor}" BorderThickness="0">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource TrackItemStyle}"
                                Height="60" Width="725" Margin="5"
                                HorizontalAlignment="Stretch">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="150"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Width="40" Height="40"
                                        Margin="0,0,10,0"
                                        VerticalAlignment="Center"
                                        CornerRadius="20"
                                        ClipToBounds="True">
                                    <Image Source="{Binding CoverPath}"
                                           Stretch="UniformToFill" />
                                </Border>

                                <StackPanel Grid.Column="1"
                                            VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Title}"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextColorBrush}"
                                               TextTrimming="CharacterEllipsis"/>
                                    <TextBlock Text="{Binding Artist.ArtistName}"
                                               FontSize="12"
                                               Foreground="{DynamicResource LightTextColor}"
                                               TextTrimming="CharacterEllipsis"/>
                                </StackPanel>

                                <TextBlock Grid.Column="2"
                                           Text="{Binding TrackDuration,
                                           Converter={StaticResource DurationConverter}}"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center"
                                           Padding="10,0"
                                           Foreground="{DynamicResource TextColorBrush}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer>
    </Grid>
</Page>
