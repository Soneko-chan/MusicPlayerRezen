<Page x:Class="UI.LibraryPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:helpers="clr-namespace:UI.Helpers"
      Title="LibraryPage">
    <Page.Resources>
        <helpers:DurationConverter x:Key="DurationConverter"/>
    </Page.Resources>
    <Grid Background="{DynamicResource BackgroundColor}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ð¾Ð¸ÑÐºÐ° -->
        <Border Grid.Row="0" Background="{DynamicResource SecondaryColorBrush}"
                Padding="15" CornerRadius="0,0,8,8" Margin="20,15,20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0" Name="SearchBox"
                         Style="{StaticResource StandardTextBoxStyle}"
                         Padding="15,8" Margin="0,0,10,0"
                         Text="ÐŸÐ¾Ð¸ÑÐº Ð¼ÑƒÐ·Ñ‹ÐºÐ¸, Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÐµÐ¹, Ð°Ð»ÑŒÐ±Ð¾Ð¼Ð¾Ð²..."
                         GotFocus="SearchBox_GotFocus"
                         LostFocus="SearchBox_LostFocus"/>

                <Button Grid.Column="1" Name="SearchButton" Content="ðŸ”"
                        Style="{DynamicResource StandardButtonStyle}"
                        Padding="12,8"
                        Click="SearchButton_Click"/>
            </Grid>
        </Border>

        <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ñ‚Ñ€ÐµÐºÐ¾Ð² -->
        <Grid Grid.Row="1" Margin="20,0,20,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="150"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0" Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ"
                       FontWeight="Bold" Padding="10,5"
                       Foreground="{DynamicResource LightTextColor}"/>
            <TextBlock Grid.Column="1" Text="Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ"
                       FontWeight="Bold" HorizontalAlignment="Right"
                       Padding="10,5"
                       Foreground="{DynamicResource LightTextColor}"/>
        </Grid>

        <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ñ€ÐµÐºÐ¾Ð² -->
        <ScrollViewer Grid.Row="2" Margin="15,0">
            <ItemsControl Name="ContentList">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource TrackItemStyle}"
                                Height="60" Margin="5"
                                MouseLeftButtonUp="TrackItem_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="150"/>
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0"
                                        Width="40" Height="40"
                                        Margin="0,0,10,0"
                                        VerticalAlignment="Center"
                                        CornerRadius="20"
                                        ClipToBounds="True">
                                    <Image Source="{Binding CoverPath}"
                                           Stretch="UniformToFill" />
                                </Border>

                                <StackPanel Grid.Column="1"
                                            VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Title}"
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextColorBrush}"
                                               TextTrimming="CharacterEllipsis"/>
                                    <TextBlock Text="{Binding Artist.ArtistName}"
                                               FontSize="12"
                                               Foreground="{DynamicResource LightTextColor}"
                                               TextTrimming="CharacterEllipsis"/>
                                </StackPanel>

                                <TextBlock Grid.Column="2"
                                           Text="{Binding TrackDuration,
                                           Converter={StaticResource DurationConverter}}"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Center"
                                           Padding="10,0"
                                           Foreground="{DynamicResource TextColorBrush}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
